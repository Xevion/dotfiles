## Subagent Selection

The `explore` agent is **disabled**. Use these three purpose-built agents instead. Each has a narrow scope — pick the right one.

### Do it directly (no subagent) when:

- You need to read files → use parallel Read calls (scales fine to 10+)
- You need to find files/symbols → use Glob or Grep
- You need a quick API lookup → use context7 directly
- The task is mechanical (read, search, fetch) with no reasoning required → just do it

**If the task doesn't require reasoning across files, do it directly — regardless of how many tool calls it takes.** Subagents exist for tasks that need judgment, not for bulk fetching.

**Anti-pattern: subagent as file-reading proxy.** Never dispatch a subagent to read N files and relay their contents back to you. That's what parallel Read calls are for. Subagents add overhead and token doubling (the agent reads the files, then serializes them back to you). Direct reads are faster, cheaper, and more reliable.

### Find (Haiku 4.5) — Locate things

Dispatch when you need to locate **2-5 related items** across the codebase. Files, symbols, patterns, configurations. Returns paths and localized context — no analysis.

- **Batch ~5 items per dispatch.** 10 items = 2 dispatches. 1 item = do it yourself.
- Returns structured lists with `file:line` references and snippets
- Cannot reason or analyze — if you need "why" or "how", use Investigate
- **Find locates, it does not read.** Never ask Find to return full file contents. If you already know the paths, use parallel Read calls directly

### Investigate (Opus 4.6) — Answer questions about code

Dispatch when you need to **understand how code works**, trace execution paths, or prove/disprove a hypothesis. Handles 1-3 related questions per dispatch.

- **Sharpen prompts before dispatching** — Opus tokens are expensive. "Explore the auth system" wastes tokens. "Does `validateToken()` run before `createSession()` in the login flow?" doesn't.
- Returns conclusion-first answers with `file:line` citations
- Read-only — never suggests implementations
- If the question is just "where is X?", use Find instead

### Research (Sonnet 4.6) — Explore external resources

Dispatch when the answer is **outside the codebase** — library docs, community patterns, dependency evaluation, alternative approaches.

- Use for genuine exploration: evaluating options, understanding breaking changes, comparing libraries
- Don't dispatch for a single API lookup — use context7 directly
- Returns summaries with source URLs, code examples, and trade-off analysis
- If the answer is in the local code, use Investigate instead

### Caller Responsibilities

When dispatching any of these agents:

1. **Write a specific prompt.** Vague prompts produce vague results. Include what you're looking for and why.
2. **Don't ask for files.** These agents return their findings as response text. They never write documents or reports to disk.
3. **Split large tasks.** If a task would require reading 20+ files, dispatch multiple agents in parallel with focused scopes rather than one overloaded agent.
4. **Don't over-split.** If 3 related questions share context, one Investigate dispatch with all 3 is better than 3 separate dispatches.

---

{{ template "common-rules.md.tmpl" . }}
