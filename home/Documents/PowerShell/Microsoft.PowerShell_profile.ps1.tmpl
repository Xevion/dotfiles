# {{ template "banner.tmpl" .}}
# PowerShell Profile for Windows
# Managed by chezmoi

# Editor configuration
$env:EDITOR = "micro"

# OpenAI API Key
$env:OPENAI_API_KEY = "{{ dopplerProjectJson.OPENAI_CHATGPT_CLI }}"

# mise - polyglot tool version manager
# Activates mise if installed (provides tools like vault, node, python, etc.)
if (Get-Command mise -ErrorAction SilentlyContinue) {
    Invoke-Expression (& mise activate pwsh | Out-String)
}

# Aliases - PowerShell equivalents of bash aliases
Set-Alias -Name nano -Value micro
Set-Alias -Name vim -Value nvim
Set-Alias -Name lg -Value lazygit

# Functions
function ll { Get-ChildItem -Force | Format-Table -AutoSize }
function la { Get-ChildItem -Force }
function es { & $PROFILE }  # Reload profile

# Chezmoi aliases
function cha { chezmoi apply --interactive }
Set-Alias -Name ch -Value chezmoi

# Git aliases
function ga { git add $args }
function gaa { git add . }
function gc { git commit $args }
function gcm { git commit -m $args }
function gco { git checkout $args }
function gd { git diff $args }
function gs { git status $args }
function gp { git pull $args }
function gst { git stash $args }

# Initialize completions if available
if (Get-Command chezmoi -ErrorAction SilentlyContinue) {
    # Chezmoi completion can be set up if needed
}